import PluginVariables as msqcvar;
import System as sys;
import main as m;

const s = StringBuffer(1024);

const pcolor1	= PVariable();

function bottomAction(cp);
function bottomText(cp){
	//에러줄을 이용하기 때문에 비공유데이터가 들어가면 바로 방이 갈림 주의!
	//에러줄은 기본적으로 중앙정렬이기 때문에 상대좌표 방식으로는 인식할 수 없음.
	
	//공유데이터는 클릭했을 때만 좌표가 갱신되므로, 에러줄은 눌렀을 때만 색이 잠깐 바뀌는 식으로 연출이 됩니다.
	const mmX = sys.mouseUserX[cp]+320-sys.screenUserX[cp];
	const mmY = sys.mouseUserY[cp];
	if(203 <= mmX && mmX <= 438 && 296 <= mmY && mmY <= 307){if(pcolor1[cp] == 0){pcolor1[cp] = 1;}}
	else{if(pcolor1[cp] == 1){pcolor1[cp] = 0;}}
	eprintln("\x1E",ptr2s(sys.colorL[pcolor1[cp]]),"[ 여기를 누르면 다른 텍스트방식으로 토글되요. ]");
	bottomAction(cp);
}

function bottomAction(cp){
	if(sys.mouseClick[cp] == 1){ //왼클릭 했을 때
		//이제 액션을 취할 땐, 모든 유저에게 공유된 데이터로 처리해야 방이 갈리지 않음.
		const mmX = sys.mouseUserX[cp]+320-sys.screenUserX[cp];
		const mmY = sys.mouseUserY[cp];
		if(203 <= mmX && mmX <= 438 && 296 <= mmY && mmY <= 307){
			s.print("다른 방식으로 전환되요!");
			if(m.selectText[cp] == 0){m.selectText[cp] = 1;}
			else{m.selectText[cp] = 0;}
			sys.textUpdate[cp] = 1; //전환되면서 새로 텍스트를 그려야하니 갱신시켜주기.
		}
	}
}